# postrm

## 文件位置

```
# 删除后执行的脚本
/var/lib/dpkg/info/coturn.postrm
```

## 文件内容

```
#!/bin/sh

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

# Automatically added by dh_installinit/13.6ubuntu1
if [ -z "${DPKG_ROOT:-}" ] && [ "$1" = "purge" ] ; then
	update-rc.d coturn remove >/dev/null
fi
# End automatically added section
# Automatically added by dh_installsystemd/13.6ubuntu1
if [ "$1" = remove ] && [ -d /run/systemd/system ] ; then
	systemctl --system daemon-reload >/dev/null || true
fi
# End automatically added section
# Automatically added by dh_installsystemd/13.6ubuntu1
if [ "$1" = "remove" ]; then
	if [ -x "/usr/bin/deb-systemd-helper" ]; then
		deb-systemd-helper mask 'coturn.service' >/dev/null || true
	fi
fi

if [ "$1" = "purge" ]; then
	if [ -x "/usr/bin/deb-systemd-helper" ]; then
		deb-systemd-helper purge 'coturn.service' >/dev/null || true
		deb-systemd-helper unmask 'coturn.service' >/dev/null || true
	fi
fi
# End automatically added section


set -e

TURNSERVER_USER=turnserver
TURNSERVER_GROUP=turnserver

if [ "$1" = "purge" ] ; then
        TURNSERVER_CONFIG=/etc/turnserver.conf
        if dpkg-statoverride --list "$TURNSERVER_CONFIG" >/dev/null 2>&1; then
                dpkg-statoverride --remove "$TURNSERVER_CONFIG"
        fi

        TURNDB_DIR=/var/lib/turn
        if dpkg-statoverride --list "$TURNDB_DIR" >/dev/null 2>&1; then
                dpkg-statoverride --remove "$TURNDB_DIR"
        fi

        if getent passwd $TURNSERVER_USER >/dev/null; then
                userdel $TURNSERVER_USER
        fi
        if getent group $TURNSERVER_GROUP >/dev/null; then
                groupdel $TURNSERVER_GROUP
        fi

        rm -f "$TURNDB_DIR"/turndb
        rmdir "$TURNDB_DIR" || true
        # we only put turndb in there, but don't fail in any case
fi

exit 0
```
